
-----------------------------------------------------
function VC.GetVehicle(ply, onlyveh)  local ent, pos = ply:GetVehicle(), nil  if !IsValid(ent) then ent = ply:GetEyeTraceNoCursor() pos = ent.HitPos ent = ent.Entity if IsValid(ent) then if !ent:IsVehicle() then if !onlyveh and string.lower(ent:GetClass()) == "prop_physics" then else ent = nil end end else ent = nil end end    if ent and ent.VC_ExtraSeat then ent = ent:GetParent() end  return ent, pos end  function VC.CanEditAdminSettings(ply, dontprint) if VC.PrivilagesCan(ply) then return true else if !dontprint then if CLIENT then VCPopup("AccessRestricted", "cross") else VCPopup(ply, "AccessRestricted", "cross") end end end end  function VC.StringPrepareForTransfer(str)  str = string.gsub(str, '^', '_U_')  str = string.gsub(str, ':', '_D_')  str = string.gsub(str, ';', '_D2_')  str = string.gsub(str, '&', '_A_')  str = string.gsub(str, ' ', '@@')  str = string.Implode("_P_", string.Explode("%", str))  return str end  function VC.EaseInOut(num) return (math.sin(math.pi*(num-0.5))+1)/2 end    if CLIENT then  if !VC.Config then VC.Config = {} end   function VC.SetConfig(data, val, onsetfunc)  local Settings = {}  if file.Exists("vcmod/config_cl.txt", "DATA") then Settings = util.JSONToTable(file.Read("Data/vcmod/config_cl.txt", "GAME")) end  Settings[data] = val if onsetfunc then onsetfunc(val) end  file.Write("vcmod/config_cl.txt", util.TableToJSON(Settings))  VC.Config = Settings  end   function VC.GetConfig(data) if !VC.ConfigInited then if file.Exists("Data/vcmod/config_cl.txt", "GAME") then VC.Config = util.JSONToTable(file.Read("Data/vcmod/config_cl.txt", "GAME")) end VC.ConfigInited = true end return VC.Config[data] end    function VC.SetPrivilages(val) if LocalPlayer():IsSuperAdmin() then net.Start("VC_Privilages_Set") net.WriteInt(val, 4) net.SendToServer() else VCPopup("AccessRestricted", "cross") end end else  util.AddNetworkString("VC_Privilages_Set")  function VC.LoadPrivilages() VC.PrivilagesLevel = file.Exists("vcmod/config_sv_privilages.txt", "DATA") and tonumber(file.Read("vcmod/config_sv_privilages.txt", "DATA")) or 2 end VC.LoadPrivilages()  function VC.SetPrivilages(ply, val) if IsValid(ply) then if ply:IsSuperAdmin() then file.Write("vcmod/config_sv_privilages.txt", val) VC.PrivilagesLevel = tonumber(val) VC.Stream_SV_Settings() else VCPopup(ply, "AccessRestricted", "cross") end end end   net.Receive("VC_Privilages_Set", function(len, ply) local val = net.ReadInt(4) VC.SetPrivilages(ply, val) end) end  function VC.PrivilagesCan(ply) if !VC.PrivilagesLevel or (VC.PrivilagesLevel == 1 and ply:IsSuperAdmin() or VC.PrivilagesLevel == 2 and ply:IsAdmin() or VC.PrivilagesLevel == 3) then return true end end local rs7 = "vc.check_msg_work_ALS_k4" 